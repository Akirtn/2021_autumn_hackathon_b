(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{115:function(e,t,n){},154:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),i=n(13),o=n.n(i),s=(n(115),n(56)),u=n(16),l=n(14),d=n(21),j=n.n(d),f=n(18),h=n.n(f),m=n(31),b=n(44),p=n.n(b);window.location.host,a="https://dena-hackathon-2021.idichi.tk";var x={withCredentials:!0,headers:{"Content-Type":"application/json"}},O={login:function(){var e=Object(m.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("".concat(a,"/users/login/"),{email:t,password:n},x).then((function(e){return e.data})).catch((function(e){}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),writeSchedule:function(){var e=Object(m.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("".concat(a,"/users/empty_schedule/"),{start_time:t,end_time:n},x).then((function(e){return e.data})).catch((function(e){}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMatchedSchedule:function(){var e=Object(m.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(a,"/users/matched_schedule/"),x).then((function(e){return e.data})).catch((function(e){}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),matchSchedule:function(){var e=Object(m.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("".concat(a,"/users/matched_schedule/"),null,x).then((function(){})).catch((function(e){}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getEmptySchedule:function(){var e=Object(m.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(a,"/users/empty_schedule/"),x).then((function(e){return e.data})).catch((function(e){}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getMembers:function(){var e=Object(m.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(a,"/users/members/"),x).then((function(e){return e.data})).catch((function(e){}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},g=n(199),y=n(76),v=n(77),S=n(58),w=n(89),F=n(73),C=n(90),T=n(97),k=n(59),N=n(60),D={color:{primaryColor:"#094067",secondaryColor:"#ef4565",greyColor:"#5f6c7b"},font:{fontFamily:"'Avenir', 'Helvetica Neue', 'Helvetica', 'Arial', 'Hiragino Sans', '\u30d2\u30e9\u30ae\u30ce\u89d2\u30b4\u30b7\u30c3\u30af', YuGothic, 'Yu Gothic', '\u30e1\u30a4\u30ea\u30aa', Meiryo, '\uff2dS\uff30\u30b4\u30b7\u30c3\u30af', 'MS PGothic', sans-serif"},background:{primaryColor:"#fff"}},M=function(){function e(){Object(k.a)(this,e)}return Object(N.a)(e,[{key:"getJapanUnixTime",value:function(e){return new Date(e.getTime()+60*(e.getTimezoneOffset()+540)*1e3).getTime()}},{key:"getBeforeWeekUnixTime",value:function(e,t){return new Date(new Date(e).getTime()-24*t*60*60*1e3).getTime()}},{key:"changeUnixTimeToMinutes",value:function(e){return new Date(1e3*e).getUTCMinutes()}},{key:"changeUnixTimeToHour",value:function(e){return new Date(1e3*e).getUTCHours()}},{key:"changeUnixTimeToFormatDayOfWeek",value:function(e){var t=new Date(e);return t.getMonth()+1+"\u6708"+t.getDate()+"\u65e5("+["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"][t.getDay()]+")"}},{key:"changeUnixTimeToFormattedString",value:function(e){var t=1e3*Number(e);return j()(t).toISOString()}}]),e}(),I=function(){function e(){Object(k.a)(this,e)}return Object(N.a)(e,[{key:"getFormattedEmptySchedules",value:function(e){var t=new M;return e.map((function(e){return{title:"\u7a7a\u304d\u6642\u9593",start:t.changeUnixTimeToFormattedString(e.start_at),end:t.changeUnixTimeToFormattedString(e.end_at),color:D.color.primaryColor}}))}},{key:"getFormattedMatchedSchedules",value:function(e){var t=new M;return e.map((function(e){return{title:e.matched_member.name,start:t.changeUnixTimeToFormattedString(e.start_at),end:t.changeUnixTimeToFormattedString(e.end_at),color:D.color.secondaryColor}}))}}]),e}(),U=n(5),Y=new I,z=Object(g.a)((function(e){return{root:{"& > *":{margin:e.spacing(2),alignItems:"center"}},paper:{minWidth:"800px",padding:e.spacing(2),alignItems:"center",width:"auto"}}})),L=function(){var e=z(),t=Object(r.useContext)(Se),n=t.selectUnixTime,a=t.setSelectUnixTime,c=t.matchedSchedules,i=t.emptySchedules,o=Object(r.useState)(!0),s=Object(l.a)(o,2),u=s[0],d=s[1];return Object(r.useEffect)((function(){d(!0)}),[u]),Object(U.jsx)("div",{className:e.root,children:Object(U.jsxs)(T.a,{className:e.paper,children:[Object(U.jsx)(v.a,{plugins:[S.b,C.a,w.a,F.a],initialView:"dayGridMonth",locale:"ja",aspectRatio:1,height:"auto",selectable:!0,selectLongPressDelay:0,headerToolbar:{left:"prev",center:"title",right:"dayGridMonth,timeGridWeek,next"},select:function(e){a(j()(e.start).unix()),d(!1)},events:[].concat(Object(y.a)(Y.getFormattedEmptySchedules(i)),Object(y.a)(Y.getFormattedMatchedSchedules(c))),initialDate:j()(1e3*n).format(),displayEventTime:!1,weekends:!0}),u&&Object(U.jsx)(v.a,{plugins:[F.a],initialView:"listDay",locale:"ja",aspectRatio:1,height:"auto",selectable:!1,selectLongPressDelay:0,headerToolbar:!1,listDayFormat:{month:"long",year:"numeric",day:"numeric",weekday:"long"},listDaySideFormat:!1,events:Y.getFormattedMatchedSchedules(c),initialDate:j()(1e3*n).format(),weekends:!0})]})})},W=n(35),_=n(75),E=n(208),P=n(204),H=n(206),G=n(218),B=n(205),J=n(222),A=n(219),R=function(e){return Object(U.jsx)(A.a,Object(W.a)({elevation:6,variant:"filled"},e))},V=Object(g.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),q=function(e){var t=V(),n=Object(r.useState)(!0),a=Object(l.a)(n,2),c=a[0],i=a[1],o=e.message,s=e.severity,u=function(e,t){"clickaway"!==t&&i(!1)};return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)("div",{className:t.root,children:Object(U.jsx)(J.a,{open:c,autoHideDuration:3e3,onClose:u,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:Object(U.jsx)(R,{onClose:function(e){u()},severity:s,children:o})})})})},K=Object(g.a)((function(e){return{root:{width:"394px",display:"flex",flexDirection:"column",margin:"20px",padding:"16px"},container:{display:"flex",justifyContent:"center",flexDirection:"row"},title:{fontSize:"16px"},button:{display:"flex",marginLeft:"auto"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:150}}})),Q=function(){var e=K(),t=Object(r.useContext)(Se),n=t.selectUnixTime,a=t.setEmptySchedules,c=Object(r.useState)(j()().format("HH:mm")),i=Object(l.a)(c,2),o=i[0],s=i[1],u=Object(r.useState)(j()().format("HH:mm")),d=Object(l.a)(u,2),f=d[0],b=d[1],p=Object(r.useState)({message:"\u7a7a\u304d\u6642\u9593\u3092\u6295\u7a3f",severity:"success",isSuccess:!1}),x=Object(l.a)(p,2),g=x[0],y=x[1],v=Object(r.useState)({message:"\u30de\u30c3\u30c1\u30f3\u30b0\u3092\u958b\u59cb",severity:"info",isSuccess:!1}),S=Object(l.a)(v,2),w=S[0],F=S[1],C=function(){var e=Object(m.a)(h.a.mark((function e(){var t,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(o),console.log(j()(n).format("YYYY/MM/DD".concat(o))),t=j()(j()(1e3*n).format("YYYY/MM/DD ".concat(o))).unix(),r=j()(j()(1e3*n).format("YYYY/MM/DD ".concat(f))).unix(),console.log(t,r),e.next=7,O.writeSchedule(String(t),String(r)).then(function(){var e=Object(m.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&y(Object(W.a)(Object(W.a)({},g),{},{isSuccess:!0}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:return e.next=9,O.getEmptySchedule().then((function(e){e&&a(e.empty_schedules)}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(m.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.matchSchedule().then((function(){F(Object(W.a)(Object(W.a)({},w),{},{isSuccess:!0}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(U.jsxs)(P.a,{className:e.root,children:[Object(U.jsx)("div",{className:e.title,children:j()(1e3*n).format("YYYY/MM/DD")}),Object(U.jsxs)("form",{className:e.container,noValidate:!0,autoComplete:"off",children:[Object(U.jsx)(B.a,{utils:_.a,children:Object(U.jsx)(H.a,{children:Object(U.jsx)(G.a,{id:"time",label:"\u958b\u59cb\u6642\u9593",value:o,onChange:function(e){s(e.target.value)},type:"time",margin:"normal",className:e.textField,InputLabelProps:{shrink:!0},inputProps:{step:300}})})}),Object(U.jsx)(B.a,{utils:_.a,children:Object(U.jsx)(H.a,{children:Object(U.jsx)(G.a,{id:"time",label:"\u7d42\u4e86\u6642\u9593",margin:"normal",type:"time",className:e.textField,value:f,onChange:function(e){b(e.target.value)},InputLabelProps:{shrink:!0},inputProps:{step:300}})})})]}),Object(U.jsxs)("div",{className:e.button,children:[Object(U.jsx)(E.a,{color:"primary",onClick:C,children:g.message}),Object(U.jsx)(E.a,{color:"secondary",onClick:T,children:w.message})]}),g.isSuccess&&Object(U.jsx)(q,{message:g.message+"\u3057\u307e\u3057\u305f",severity:g.severity}),w.isSuccess&&Object(U.jsx)(q,{message:w.message+"\u3057\u307e\u3057\u305f",severity:w.severity})]})},X=n(64),Z=n(212),$=n(211),ee=n(221),te=n(207),ne=n(215),ae=n(216),re=n(210),ce=n(213),ie=n(214),oe=n(6),se=n(223),ue=Object(g.a)((function(e){return{root:{fontFamily:D.font.fontFamily,fontWeight:"bold",display:"flex","& > *":{margin:e.spacing(1)},cursor:"pointer"},size:{width:function(e){return e.width},height:function(e){return e.height}}}})),le=function(e){var t=e.avatarSize,n=e.name,a=ue(t);return Object(U.jsx)("div",{className:a.root,children:Object(U.jsx)(se.a,{className:a.size,children:n.split("")[0]})})},de=n(209),je=n(93),fe=n.n(je),he=n(224),me=Object(g.a)((function(e){return{root:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}}}})),be=function(e){var t=me(),n=e.tagName;return Object(U.jsx)("div",{className:t.root,children:Object(U.jsx)(he.a,{label:n,color:"primary"})})},pe=Object(g.a)({root:{minWidth:190,fontWeight:"bold",fontFamily:D.font.fontFamily},title:{fontSize:14,fontWeight:"bold",fontFamily:D.font.fontFamily}}),xe=function(e){var t=e.profile,n=pe();return Object(U.jsx)(P.a,{className:n.root,variant:"outlined",children:Object(U.jsxs)(de.a,{children:[Object(U.jsxs)("div",{style:{fontFamily:D.font.fontFamily,fontSize:"16px",display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(U.jsx)("div",{style:{padding:"4px 0px"},children:"\u540d\u524d\uff1a"}),Object(U.jsx)("div",{children:t.name})]}),Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{style:{fontFamily:D.font.fontFamily,fontSize:"16px",display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(U.jsx)(fe.a,{}),Object(U.jsx)("div",{children:"\u30bf\u30b0\u4e00\u89a7"})]}),Object(U.jsx)("div",{style:{fontFamily:D.font.fontFamily,display:"flex",flexDirection:"row",alignItems:"center"},children:t.tags.map((function(e,t){return Object(U.jsx)(be,{tagName:e},"tags"+t)}))})]})]})})},Oe=Object(g.a)((function(e){return{root:{display:"flex",fontFamily:D.font.fontFamily},appBar:{fontFamily:D.font.fontFamily,backgroundColor:D.color.primaryColor,zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},title:{flexGrow:1,fontWeight:"bold",fontFamily:D.font.fontFamily},toolbar:Object(W.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)}}})),ge=function(e){var t=Oe(),n=c.a.useState([]),a=Object(l.a)(n,2),i=a[0],o=a[1],s=c.a.useState(null),u=Object(l.a)(s,2),d=u[0],j=u[1],f=c.a.useState(!1),h=Object(l.a)(f,2),m=h[0],b=h[1],p=Object(r.useContext)(Se),x=p.userInfo,O=p.memberList,g={width:"40px",height:"40px"},y=function(e){return function(t){j(t.currentTarget),o(e),b(!0)}},v=function(){j(null),b(!1)};return Object(U.jsxs)("div",{className:t.root,children:[Object(U.jsx)(re.a,{open:m,anchorEl:d,placement:"top",style:{zIndex:3e4},children:Object(U.jsx)(xe,{profile:i})}),Object(U.jsx)($.a,{}),Object(U.jsx)(Z.a,{position:"fixed",className:Object(oe.a)(t.appBar,Object(X.a)({},t.appBarShift,!1)),children:Object(U.jsxs)(ce.a,{children:[Object(U.jsx)(ie.a,{variant:"h6",noWrap:!0,className:t.title,children:"\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u7ba1\u7406"}),Object(U.jsx)("div",{onMouseOver:y(x),onMouseOut:function(){v()},children:Object(U.jsx)(le,{avatarSize:g,name:x.name})})]})}),Object(U.jsxs)(ee.a,{variant:"permanent",children:[Object(U.jsx)("div",{className:t.toolbar}),Object(U.jsxs)(te.a,{children:[Object(U.jsxs)(ne.a,{style:{fontWeight:"bold",fontSize:"11px",fontFamily:D.font.fontFamily,display:"flex",justifyContent:"center"},children:["\u4ef2\u826f\u304f\u306a",Object(U.jsx)("br",{}),"\u308c\u308b\u304b\u3082?"]}),O.map((function(e,t){return Object(U.jsx)(ne.a,{button:!0,children:Object(U.jsx)(ae.a,{onMouseOver:y(e),onMouseOut:function(){v()},children:Object(U.jsx)(le,{avatarSize:g,name:e.name})})},t)}))]})]}),Object(U.jsxs)("main",{className:t.content,children:[Object(U.jsx)("div",{className:t.toolbar}),e.children]})]})},ye=Object(g.a)((function(e){return{root:{display:"flex"},content:{margin:"-24px 0px 0px 60px"}}})),ve=function(){var e=ye();return Object(U.jsx)("div",{className:e.root,children:Object(U.jsx)(ge,{children:Object(U.jsxs)("div",{className:e.content,children:[Object(U.jsx)(L,{}),Object(U.jsx)(Q,{})]})})})},Se=Object(r.createContext)({}),we=function(){var e=Object(u.g)(),t=Object(u.f)(),n=Object(r.useState)(e.state),a=Object(l.a)(n,2),c=a[0],i=a[1],o=Object(r.useState)(void 0),s=Object(l.a)(o,2),d=s[0],f=s[1],h=Object(r.useState)(void 0),m=Object(l.a)(h,2),b=m[0],p=m[1],x=Object(r.useState)(void 0),g=Object(l.a)(x,2),y=g[0],v=g[1],S=Object(r.useState)(j()().unix()),w=Object(l.a)(S,2),F=w[0],C=w[1];return Object(r.useEffect)((function(){if(O.getMatchedSchedule().then((function(e){e&&p(e.matched_schedules)})),O.getEmptySchedule().then((function(e){e&&f(e.empty_schedules)})),O.getMembers().then((function(e){e&&v(e.members)})),localStorage.getItem("userInfo")){var e=localStorage.getItem("userInfo");console.log(e);var n=JSON.parse(e);console.log(n),i(n)}else t.push({pathname:"/"})}),[]),console.log({userInfo:c,emptySchedules:d,matchedSchedules:b,memberList:y}),Object(U.jsx)("div",{children:c&&d&&b&&y&&Object(U.jsx)(Se.Provider,{value:{userInfo:c,setUserInfo:i,emptySchedules:d,setEmptySchedules:f,matchedSchedules:b,setMatchedSchedules:p,memberList:y,setMemberList:v,selectUnixTime:F,setSelectUnixTime:C},children:Object(U.jsx)(ve,{})})})},Fe=n(217),Ce=Object(g.a)((function(){return{root:{position:"absolute",left:"50%",top:"50%",width:"100%",transform:"translate(-50%, -50%)",height:screen.height,opacity:"0.5",zIndex:1,backgroundColor:D.color.greyColor},circle:{color:D.color.primaryColor,position:"absolute",left:.5*window.innerWidth-24,top:.5*screen.height-40}}})),Te=function(e){var t=e.isLoading,n=Ce();return Object(U.jsx)(U.Fragment,{children:t&&Object(U.jsx)("div",{className:n.root,children:Object(U.jsx)(Fe.a,{size:80,className:n.circle})})})},ke=Object(g.a)((function(e){return{form:{textAlign:"center",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},button:{marginTop:e.spacing(2),backgroundColor:D.color.primaryColor,color:"white","&:hover":{background:"white",color:D.color.primaryColor}}}})),Ne=function(){var e=Object(u.f)(),t=ke(),n=Object(r.useState)(""),a=Object(l.a)(n,2),c=a[0],i=a[1],o=Object(r.useState)(""),s=Object(l.a)(o,2),d=s[0],j=s[1],f=Object(r.useState)(!1),h=Object(l.a)(f,2),m=h[0],b=h[1],p=Object(r.useState)(!1),x=Object(l.a)(p,2),g=x[0],y=x[1];return Object(U.jsx)(H.a,{container:!0,justifyContent:"center",alignItems:"center",className:t.form,spacing:4,children:Object(U.jsxs)(H.a,{item:!0,xs:6,sm:6,md:4,lg:4,children:[Object(U.jsx)(G.a,{error:m,id:"email",type:"email",label:"Email",fullWidth:!0,onChange:function(e){i(e.target.value)}}),Object(U.jsx)(G.a,{error:m,id:"password",label:"Password",fullWidth:!0,onChange:function(e){j(e.target.value)}}),Object(U.jsx)(Te,{isLoading:g}),Object(U.jsx)(E.a,{variant:"contained",className:t.button,onClick:function(){y(!0),O.login(c,d).then((function(t){t?(localStorage.setItem("userInfo",JSON.stringify(t)),e.push({pathname:"/schedule",state:t})):b(!0),y(!1)}))},children:"LOGIN"})]})})},De=function(){return Object(U.jsx)("div",{children:Object(U.jsx)(Ne,{})})},Me=function(){return Object(U.jsx)(De,{})},Ie=function(){return Object(U.jsx)(s.a,{children:Object(U.jsxs)(u.c,{children:[Object(U.jsx)(u.a,{exact:!0,path:"/",children:Object(U.jsx)(Me,{})}),Object(U.jsx)(u.a,{exact:!0,path:"/schedule",children:Object(U.jsx)(we,{})}),Object(U.jsx)(u.a,{children:Object(U.jsx)(Ue,{})})]})})},Ue=function(){return Object(U.jsx)("h2",{children:"Not Found"})},Ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,225)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};o.a.render(Object(U.jsx)(c.a.StrictMode,{children:Object(U.jsx)(Ie,{})}),document.getElementById("root")),Ye()}},[[154,1,2]]]);
//# sourceMappingURL=main.029bccc4.chunk.js.map